# Лабораторная работа №4. Тема: "Мандатное управление доступом"
Цель работы
----------
познакомиться с терминами мандатного управления доступом в AstraLinux;

организовать совместную работу пользователей с файлами на разных уровнях конфиденциальности;

изучить основные инструменты управления мандатным доступом;

получить навык поиска информации в документации.

Оборудование, ПО:
----------

Виртуальная машина или компьютер под управлением ОС AstraLinux 1.7 в любом уровне защищенности.

Ход работы:
----------

# Начнем с терминологии.

Для точного понимания, как работать с мандатным уровнем доступа необходимо хорошо понимать компоненты и термины данной системы.

Обратимся к основной документации на сайте [wiki.astralinux.ru](https://wiki.astralinux.ru/pages/viewpage.action?pageId=153486002)

В механизме мандатного управления доступом определены следующие термины:

- **субъект мандатного доступа** — тот, кто выполняет операции, подлежащие мандатному контролю (пользователь или процесс);

- **сущность (объект) мандатного доступа** — то, с чем выполняются операции, подлежащие мандатному контролю (файл, каталог и т.д.);

- **контейнер** — структурированная сущность доступа, т.е. сущность (каталог ФС), которая может содержать другие сущности доступа (каталоги или файлы).

Сущностям и субъектам присваиваются следующие мандатные атрибуты:

- **иерархический уровень конфиденциальности (уровень конфиденциальности)** — определяет степень секретности документа и соответствующий уровень доступа к этому документу, назначенный персоналу (субъекту). Субъекту с определенным уровнем конфиденциальности разрешено читать только документы с таким же уровнем конфиденциальности или ниже и запрещено читать документы с более высоким уровнем конфиденциальности. А также персоналу с более высоким уровнем конфиденциальности запрещено передавать (преднамеренно или случайно) документы высокого уровня конфиденциальности персоналу с более низким уровнем конфиденциальности;

- **неиерархическая категория конфиденциальности (категории конфиденциальности)** — разделение по категориям конфиденциальности. Персонал, работающий с первой категорией конфиденциальности, имеет соответствующую категорию конфиденциальности. При этом, не имея вторую категорию конфиденциальности, персонал не может иметь доступ к материалам второй категории конфиденциальности, а также не может передавать материалы первой категории конфиденциальности персоналу, не имеющему первую категорию конфиденциальности. Доступ может быть предоставлен одновременно к нескольким категориям конфиденциальности;

- **уровень целостности (неиерархический уровень целостности и иерархический (линейный) уровень целостности)** — субъект, работающий на некотором уровне целостности, может записывать (изменять) только сущности своего или более низкого уровня целостности. Иерархический уровень целостности в ОС зарезервирован, и на уровне пользователя не поддерживается его использование;

- **дополнительные мандатные атрибуты управления доступом** — являются необязательными атрибутами и позволяют уточнять или изменять правила мандатного доступа для отдельных контейнеров, субъектов или сущностей.

Путем использования уровней и категорий конфиденциальности обеспечивается защита от несанкционированного доступа к информации в части:

- невозможности прочитать информацию, к которой не предоставлен доступ:
 - нижним уровням конфиденциальности запрещено читать информацию с верхних уровней конфиденциальности;
 - всем запрещено читать информацию, на которую нет разрешенной категории конфиденциальности;
- невозможности передать информацию тому, кому не предоставлен доступ:
 - верхним уровням конфиденциальности запрещено записывать свою информацию на нижние уровни конфиденциальности;
 - всем запрещено передавать информацию тем, у кого нет соответствующей категории конфиденциальности.


При прохождении базового курса вы уже знакомились с минимимальным функционалом настройки прав доступа, или как часто можно встретить в англоязычной терминологии - Minimal POSIX ACL.


Напомним, как эти права доступа выглядят

![Картинка](./Screen1.png)


Также Minimal ACL имеют числовое представление (Numeric Notation) в виде трех восьмеричных чисел. Эти числа определяют разрешение на доступ к файлу или директории трех субъектов доступа (user,group,other). Каждое из них формируется путем суммирования восьмеричных значений необходимых разрешений:

- чтение = 4;

- запись = 2;

- выполнение =1.

Например, полный доступ (rwx) – это: 4+2+1=7


Вполне естественно, что такая простая схема, как в Minimal POSIX ACL имеет ряд недостатков. Самый явный из них, это отсутствие гибкости при совместном доступе субъектов к объектам.

Поэтому, была внедрена новая система - Extended POSIX ACL (EA) или иначе говоря расширенный список контроля доступа.

![Картинка](./Screen2.png)

Команда - **getfacl** позволяет получить информацию о настройках расширенного списка контроля доступа. Давайте проверим её работу:

```console
getfacl example1.txt
```


В следующем материале вы познакомитесь с Мандатным управлением доступа!

Благодарю за чтение и успехов вам в обучении!


# Дополнительная информация:
1) Немного про SUID, SGID и Sticky-Bit [Ссылка](https://ruvds.com/ru/helpcenter/suid-sgid-sticky-bit-linux/)
2) Немного про ACL в Linux [Ссылка](https://wiki.archlinux.org/title/Access_Control_Lists_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9))
3) Документация на chattr [Ссылка](https://www.opennet.ru/man.shtml?topic=chattr&category=1&russian=0)
